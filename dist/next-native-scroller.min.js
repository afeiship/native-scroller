!function(){var t=t||this,e=t.nx||require("next-js-core2"),o=e.dom.Event||require("next-dom-event");t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)}}();var i,n,s;t.navigator.pointerEnabled?(i="pointerdown",n="pointermove",s="pointerup"):t.navigator.msPointerEnabled?(i="MSPointerDown",n="MSPointerMove",s="MSPointerUp"):"ontouchstart"in window?(i="touchstart",n="touchmove",s="touchend"):(i="mousedown",n="mousemove",s="mouseup");var r,c,l,a=!1,h=!1,u=0,d=0,v=!1,m=null,f=null,T=!0,p=e.declare("nx.NativeScroller",{methods:{init:function(t,e,a){r=t,c=e,l=a,this.bindAll(),this._touchStartRes=o.on(c,i,this.handleTouchstart),this._touchMoveRes=o.on(c,n,this.handleTouchmove),this._touchEndRes=o.on(c,s,this.handleTouchend),this._scrollRes=o.on(r,"scroll",this.handleScroll)},bindAll:function(){var t=["handleTouchstart","handleTouchmove","handleTouchend","handleScroll"];e.each(t,function(t,e){this[e]=this[e].bind(this)},this)},destroy:function(){c&&(this._touchStartRes.destroy(),this._touchMoveRes.destroy(),this._touchEndRes.destroy()),r&&this._scrollRes.destroy(),r=null,c=null},finish:function(){var e=this;setTimeout(function(){t.requestAnimationFrame(e.tail.bind(e)),e.scrollTo(0,500,e.deactivate.bind(this)),setTimeout(function(){h&&(h=!1,e.setScrollLock(!1))},500)},500)},handleTouchstart:function(t){t.touches=t.touches||[{screenX:t.screenX,screenY:t.screenY}],m=Math.floor(t.touches[0].screenY)},handleTouchend:function(t){m=null,(T||a)&&(a?(a=!1,u=0,d>60?(this.start(),this.scrollTo(60,500)):(this.scrollTo(0,500,this.deactivate.bind(this)),h=!1)):(u=0,h=!1,this.setScrollLock(!1)))},handleTouchmove:function(e){if(e.touches=e.touches||[{screenX:e.screenX,screenY:e.screenY}],m||"mousemove"!=e.type){if(null===m&&(m=e.touches[0].screenY),(f=e.touches[0].screenY-m)-u<=0||r.scrollTop>0)return h&&(h=!1,this.setScrollLock(!1)),a&&this.nativescroll(r,f- -1*u),void(0!==d&&this.overscroll(0));f>0&&0===r.scrollTop&&!h&&(u=f),e.preventDefault(),h||(h=!0,this.setScrollLock(!0)),a=!0,this.overscroll((f-u)/3),!v&&d>60?(v=!0,t.requestAnimationFrame(this.activate.bind(this))):v&&d<60&&(v=!1,t.requestAnimationFrame(this.deactivate.bind(this)))}},handleScroll:function(t){T=0===t.target.scrollTop||a},overscroll:function(t){c.style["-webkit-transform"]="translate3d(0px, "+t+"px, 0px)",d=t,this.fire("move")},nativescroll:function(e,o){e.scrollTop=o;var i=document.createEvent("UIEvents");i.initUIEvent("scroll",!0,!0,t,1),e.dispatchEvent(i)},setScrollLock:function(e){var o=this;e?t.requestAnimationFrame(function(){c.classList.add("overscroll"),o.show()}):t.requestAnimationFrame(function(){c.classList.remove("overscroll"),o.hide(),o.deactivate()})},scrollTo:function(e,o,i){function n(t){return--t*t*t+1}function s(){var a=Date.now(),u=Math.min(1,(a-c)/o),d=n(u);r.overscroll(Math.floor(d*(e-l)+l)),u<1?t.requestAnimationFrame(s):(e<5&&e>-5&&(h=!1,r.setScrollLock(!1)),i&&i())}var r=this,c=Date.now(),l=d;if(l===e)return void i();t.requestAnimationFrame(s)},show:function(){this.fire("init"),l.classList.remove("invisible")},hide:function(){l.classList.add("invisible")},activate:function(){l.classList.add("active"),this.fire("active")},deactivate:function(){var t=this;setTimeout(function(){l.classList.remove("active"),l.classList.remove("refreshing"),l.classList.remove("refreshing-tail"),v&&(v=!1),t.fire("finish")},150)},tail:function(){l.classList.add("refreshing-tail"),this.fire("loaded")},start:function(){this.fire("load"),l.classList.add("refreshing"),this.finish()}}});"undefined"!=typeof module&&module.exports&&(module.exports=p)}();