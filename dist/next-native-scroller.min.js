!function(){var e=e||this,t=e.nx||require("next-js-core2"),n={on:function(t,n,o){(o||e).addEventListener(t,n)},off:function(e,t,n){n.removeEventListener(e,t)}};e.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}();var o,i,s;e.navigator.pointerEnabled?(o="pointerdown",i="pointermove",s="pointerup"):e.navigator.msPointerEnabled?(o="MSPointerDown",i="MSPointerMove",s="MSPointerUp"):(o="touchstart",i="touchmove",s="touchend");var r,c,l,a=!1,h=!1,u=0,d=0,f=!1,m=null,v=null,T=!0,b=t.declare("nx.NativeScroller",{methods:{init:function(e,t,a){r=e,c=t,l=a,n.on(o,this.handleTouchstart.bind(this),c),n.on(i,this.handleTouchmove.bind(this),c),n.on(s,this.handleTouchend.bind(this),c),n.on("mousedown",this.handleMousedown.bind(this),c),n.on("mousemove",this.handleTouchmove.bind(this),c),n.on("mouseup",this.handleTouchend.bind(this),c),n.on("scroll",this.handleScroll.bind(this),r)},destroy:function(){c&&(n.off(o,this.handleTouchstart.bind(this),c),n.off(i,this.handleTouchmove.bind(this),c),n.off(s,this.handleTouchend.bind(this),c),n.off("mousedown",this.handleMousedown.bind(this),c),n.off("mousemove",this.handleTouchmove.bind(this),c),n.off("mouseup",this.handleTouchend.bind(this),c)),r&&n.off("scroll",this.handleScroll.bind(this),r),r=null,c=null},finish:function(){var t=this;setTimeout(function(){e.requestAnimationFrame(t.tail),t.scrollTo(0,500,t.deactivate),setTimeout(function(){h&&(h=!1,t.setScrollLock(!1))},500)},500)},handleMousedown:function(e){e.touches=e.touches||[{screenX:e.screenX,screenY:e.screenY}],m=Math.floor(e.touches[0].screenY)},handleTouchstart:function(e){e.touches=e.touches||[{screenX:e.screenX,screenY:e.screenY}],m=e.touches[0].screenY},handleTouchend:function(e){m=null,(T||a)&&(a?(a=!1,u=0,d>60?(this.start(),this.scrollTo(60,500)):(this.scrollTo(0,500,this.deactivate),h=!1)):(u=0,h=!1,this.setScrollLock(!1)))},handleTouchmove:function(t){if(t.touches=t.touches||[{screenX:t.screenX,screenY:t.screenY}],m||"mousemove"!=t.type){if(null===m&&(m=t.touches[0].screenY),(v=t.touches[0].screenY-m)-u<=0||r.scrollTop>0)return h&&(h=!1,this.setScrollLock(!1)),a&&this.nativescroll(r,v- -1*u),void(0!==d&&this.overscroll(0));v>0&&0===r.scrollTop&&!h&&(u=v),t.preventDefault(),h||(h=!0,this.setScrollLock(!0)),a=!0,this.overscroll((v-u)/3),!f&&d>60?(f=!0,e.requestAnimationFrame(this.activate.bind(this))):f&&d<60&&(f=!1,e.requestAnimationFrame(this.deactivate.bind(this)))}},handleScroll:function(e){T=0===e.target.scrollTop||a},overscroll:function(e){c.style["-webkit-transform"]="translate3d(0px, "+e+"px, 0px)",d=e},nativescroll:function(t,n){t.scrollTop=n;var o=document.createEvent("UIEvents");o.initUIEvent("scroll",!0,!0,e,1),t.dispatchEvent(o)},setScrollLock:function(t){var n=this;t?e.requestAnimationFrame(function(){c.classList.add("overscroll"),n.show()}):e.requestAnimationFrame(function(){c.classList.remove("overscroll"),n.hide(),n.deactivate()})},scrollTo:function(t,n,o){function i(e){return--e*e*e+1}function s(){var a=Date.now(),u=Math.min(1,(a-c)/n),d=i(u);r.overscroll(Math.floor(d*(t-l)+l)),u<1?e.requestAnimationFrame(s):(t<5&&t>-5&&(h=!1,r.setScrollLock(!1)),o&&o())}var r=this,c=Date.now(),l=d;if(l===t)return void o();e.requestAnimationFrame(s)},show:function(){l.classList.remove("invisible")},hide:function(){l.classList.add("invisible")},activate:function(){l.classList.add("active")},deactivate:function(){setTimeout(function(){l.classList.remove("active"),l.classList.remove("refreshing"),l.classList.remove("refreshing-tail"),f&&(f=!1)},150)},tail:function(){l.classList.add("refreshing-tail")},start:function(){l.classList.add("refreshing"),this.finish()}}});"undefined"!=typeof module&&module.exports&&(module.exports=b)}();