!function(){var t,e,o,n=n||this,i=n.nx||require("next-js-core2"),s=i.dom.Event||require("next-dom-event"),c=function(){return c||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||function(t){n.setTimeout(t,1e3/60)}}();n.navigator.pointerEnabled?(t="pointerdown",e="pointermove",o="pointerup"):n.navigator.msPointerEnabled?(t="MSPointerDown",e="MSPointerMove",o="MSPointerUp"):"ontouchstart"in window?(t="touchstart",e="touchmove",o="touchend"):(t="mousedown",e="mousemove",o="mouseup");var r,l,u,h={easeOutCubic:function(t){return--t*t*t+1}},a=!1,d=!1,v=0,f=0,m=!1,p=null,T=null,S=!0,w=i.declare("nx.NativeScroller",{properties:{bound:{get:function(){return l.getBoundingClientRect()}}},methods:{init:function(n,c,h){var a=["handleTouchstart","handleTouchmove","handleTouchend","handleScroll","activate","deactivate","tail"];window.ss=this,r=n,l=c,u=h,i.bindAll(a,this),this._touchStartRes=s.on(l,t,this.handleTouchstart),this._touchMoveRes=s.on(l,e,this.handleTouchmove),this._touchEndRes=s.on(l,o,this.handleTouchend),this._scrollRes=s.on(r,"scroll",this.handleScroll),this.overscroll(0)},destroy:function(){l&&(this._touchStartRes.destroy(),this._touchMoveRes.destroy(),this._touchEndRes.destroy()),r&&this._scrollRes.destroy(),r=null,l=null},finish:function(){var t=this;setTimeout(function(){c(t.tail),t.scrollTo(0,500,t.deactivate),setTimeout(function(){d&&(d=!1,t.setScrollLock(!1))},500)},500)},handleTouchstart:function(t){t.touches=t.touches||[{screenX:t.screenX,screenY:t.screenY}],p=Math.floor(t.touches[0].screenY)},handleTouchend:function(t){p=null,(S||a)&&(a?(a=!1,v=0,f>50?(this.start(),this.scrollTo(50,500)):(this.scrollTo(0,500,this.deactivate),d=!1)):(v=0,d=!1,this.setScrollLock(!1)))},handleTouchmove:function(t){if(t.touches=t.touches||[{screenX:t.screenX,screenY:t.screenY}],p||"mousemove"!=t.type){if(null===p&&(p=t.touches[0].screenY),(T=t.touches[0].screenY-p)-v<=0||r.scrollTop>0)return d&&(d=!1,this.setScrollLock(!1)),a&&this.nativescroll(r,T- -1*v),void(0!==f&&this.overscroll(0));T>0&&0===r.scrollTop&&!d&&(v=T),t.preventDefault(),d||(d=!0,this.setScrollLock(!0)),a=!0,this.overscroll((T-v)/3),!m&&f>50?(m=!0,c(this.activate)):m&&f<50&&(m=!1,c(this.deactivate))}},handleScroll:function(t){S=0===t.target.scrollTop||a},overscroll:function(t){l.style["-webkit-transform"]="translate3d(0px, "+t+"px, 0px)",u.style["-webkit-transform"]="translate3d(0px, "+(this.bound.top-40)+"px, 0px)",f=t,this.fire("move")},nativescroll:function(t,e){t.scrollTop=e;var o=document.createEvent("UIEvents");o.initUIEvent("scroll",!0,!0,n,1),t.dispatchEvent(o)},setScrollLock:function(t){var e=this;c(t?function(){e.show()}:function(){e.hide(),e.deactivate()})},scrollTo:function(t,e,o){function n(){var l=Date.now(),u=Math.min(1,(l-s)/e),a=h.easeOutCubic(u);i.overscroll(Math.floor(a*(t-r)+r)),u<1?c(n):(t<5&&t>-5&&(d=!1,i.setScrollLock(!1)),o&&o())}var i=this,s=Date.now(),r=f;if(r===t)return void o();c(n)},show:function(){this.fire("init")},hide:function(){},activate:function(){this.fire("active")},deactivate:function(){var t=this;setTimeout(function(){m&&(m=!1,t.fire("finish"))},150)},tail:function(){this.fire("loaded")},start:function(){this.fire("load"),this.finish()}}});"undefined"!=typeof module&&module.exports&&(module.exports=w)}();