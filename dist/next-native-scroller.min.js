!function(){var e=e||this,t=e.nx||require("next-js-core2"),o=t.dom.Event||require("next-dom-event");e.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}();var n,s,i;e.navigator.pointerEnabled?(n="pointerdown",s="pointermove",i="pointerup"):e.navigator.msPointerEnabled?(n="MSPointerDown",s="MSPointerMove",i="MSPointerUp"):"ontouchstart"in window?(n="touchstart",s="touchmove",i="touchend"):(n="mousedown",s="mousemove",i="mouseup");var r,c,l,a=!1,u=!1,h=0,d=0,v=!1,m=null,f=null,T=!0,p=t.declare("nx.NativeScroller",{methods:{init:function(e,t,a){r=e,c=t,l=a,this.bindAll(),this._touchStartRes=o.on(c,n,this.handleTouchstart),this._touchMoveRes=o.on(c,s,this.handleTouchmove),this._touchEndRes=o.on(c,i,this.handleTouchend),this._scrollRes=o.on(r,"scroll",this.handleScroll)},bindAll:function(){var e=["handleTouchstart","handleTouchmove","handleTouchend","handleScroll"];t.each(e,function(e,t){this[t]=this[t].bind(this)},this)},destroy:function(){c&&(this._touchStartRes.destroy(),this._touchMoveRes.destroy(),this._touchEndRes.destroy()),r&&this._scrollRes.destroy(),r=null,c=null},finish:function(){var t=this;setTimeout(function(){e.requestAnimationFrame(t.tail),t.scrollTo(0,500,t.deactivate),setTimeout(function(){u&&(u=!1,t.setScrollLock(!1))},500)},500)},handleTouchstart:function(e){e.touches=e.touches||[{screenX:e.screenX,screenY:e.screenY}],m=Math.floor(e.touches[0].screenY)},handleTouchend:function(e){m=null,(T||a)&&(a?(a=!1,h=0,d>60?(this.start(),this.scrollTo(60,500)):(this.scrollTo(0,500,this.deactivate),u=!1)):(h=0,u=!1,this.setScrollLock(!1)))},handleTouchmove:function(t){if(t.touches=t.touches||[{screenX:t.screenX,screenY:t.screenY}],m||"mousemove"!=t.type){if(null===m&&(m=t.touches[0].screenY),(f=t.touches[0].screenY-m)-h<=0||r.scrollTop>0)return u&&(u=!1,this.setScrollLock(!1)),a&&this.nativescroll(r,f- -1*h),void(0!==d&&this.overscroll(0));f>0&&0===r.scrollTop&&!u&&(h=f),t.preventDefault(),u||(u=!0,this.setScrollLock(!0)),a=!0,this.overscroll((f-h)/3),!v&&d>60?(v=!0,e.requestAnimationFrame(this.activate.bind(this))):v&&d<60&&(v=!1,e.requestAnimationFrame(this.deactivate.bind(this)))}},handleScroll:function(e){T=0===e.target.scrollTop||a},overscroll:function(e){c.style["-webkit-transform"]="translate3d(0px, "+e+"px, 0px)",d=e,this.fire("move")},nativescroll:function(t,o){t.scrollTop=o;var n=document.createEvent("UIEvents");n.initUIEvent("scroll",!0,!0,e,1),t.dispatchEvent(n)},setScrollLock:function(t){var o=this;t?e.requestAnimationFrame(function(){c.classList.add("overscroll"),o.show()}):e.requestAnimationFrame(function(){c.classList.remove("overscroll"),o.hide(),o.deactivate()})},scrollTo:function(t,o,n){function s(e){return--e*e*e+1}function i(){var a=Date.now(),h=Math.min(1,(a-c)/o),d=s(h);r.overscroll(Math.floor(d*(t-l)+l)),h<1?e.requestAnimationFrame(i):(t<5&&t>-5&&(u=!1,r.setScrollLock(!1)),n&&n())}var r=this,c=Date.now(),l=d;if(l===t)return void n();e.requestAnimationFrame(i)},show:function(){l.classList.remove("invisible")},hide:function(){l.classList.add("invisible")},activate:function(){l.classList.add("active")},deactivate:function(){setTimeout(function(){l.classList.remove("active"),l.classList.remove("refreshing"),l.classList.remove("refreshing-tail"),v&&(v=!1)},150)},tail:function(){l.classList.add("refreshing-tail")},start:function(){l.classList.add("refreshing"),this.finish()}}});"undefined"!=typeof module&&module.exports&&(module.exports=p)}();